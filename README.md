Tiny Arch
---------

Tiny Arch generates a 10M bootable iso with pacman. The iso generated is
minimal, just some drivers, busybox commands and pacman.

# How to use

Install the package:

```sh
mkdir -p /var/abs/local
cd /var/abs/local
wget https://github.com/hackaugusto/tinyarch/archive/master.zip -O tinyarch.zip
unzip tinyarch.zip -d tinyarch
rm tinyarch.zip
cd tinyarch
makepkg
# [sudo] pacman -U tinyarch-1-1-x86_64.pkg.tar.xz
```

After installed run `tinyarch container` to create the iso. To use the image
with qemu run:

```sh
qemu-system-x86_64 -device virtio-net,netdev=network0 -netdev user,id=network0 -boot order=d -cdrom tinyarch.iso
```

# Configuration

To add new files, binaries or modules into the iso:

- Inform additional packages to install in the container in the command line
  `tinyarch container {packages}`.
- Change `FILES` parameter in the `/etc/mkinitcpio-tinyarch.conf` to copy the
  files into the initramfs.
- Modules can be added with the `MODULES` parameter.

# How it works

The script will create a base system in /temp, and run itself inside this
container using `systemd-nspawn` to create a bootable iso. The iso uses the
syslinux bootloader, arch's stock kernel, a clean filesystem, and a initramfs
with a basic system to run pacman.

## Boot

Tiny Arch generates an iso image using xorriso, xorriso suports el torito for
setting up the boot loader. The image generated by Tiny Arch will use syslinux
as it bootload.
